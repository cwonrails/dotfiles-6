# Set font
font pango: Noto Sans, Taskbar 9

# Set gaps
for_window [class="^.*"] border pixel 1
gaps inner 30
gaps outer 0

# Borders
new_window pixel 1
new_float pixel 1
hide_edge_borders both

# Colors
client.focused #9fbc00 #dddddd #111111
client.unfocused #444444 #444444 #315858
client.focused_inactive #444444 #444444 #2c2c2f
client.urgent #383a3b #383a3b #ee0000

# Specific window configuration
for_window    [window_role="pop-up"]                             floating enable
for_window    [class="Skype"]                                    move container to $workspace4
for_window    [class="Telegram"]                                 move container to $workspace4
for_window    [class="jetbrains-idea"]                           move container to $workspace5
for_window    [class="jetbrains-studio"]                         move container to $workspace5
for_window    [class="xfreerdp"]                                 move container to $workspace9
for_window    [class="Emacs"]                                    move container to $workspace8
for_window    [class="albert"]                                   border none
for_window    [instance="TeamViewer.exe"]                        floating enable, move container to $workspace0
for_window    [instance="TeamViewer.exe" title="Free license"]   floating disable

# Bar
bar {
  colors {
    # Whole color settings
    background #000000
    statusline #ffffff
    separator  #333333

    # Type             border  background font
    focused_workspace  #008fff #007fff #ffffff
    active_workspace   #333333 #5f676a #ffffff
    inactive_workspace #333333 #222222 #888888
    urgent_workspace   #aa0000 #990000 #ffffff
  }

  status_command py3status
  position top
}


# Use Windows as a modifier key
set $mod Mod4

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# Switch keyboard layout (Alt+Shift)
bindcode Mod1+50 exec ~/bin/change-keyboard-layout.sh

# Start a terminal
bindsym $mod+Return exec i3-sensible-terminal

# Kill focused window (q)
bindcode $mod+Shift+24 kill

# Change focus (h)(j)(k)(l)
bindcode $mod+43 focus left
bindcode $mod+44 focus down
bindcode $mod+45 focus up
bindcode $mod+46 focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move focused window (h)(j)(k)(l)
bindcode $mod+Shift+43 move left
bindcode $mod+Shift+44 move down
bindcode $mod+Shift+45 move up
bindcode $mod+Shift+46 move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Split (v)
bindcode $mod+Shift+55 split h
bindcode $mod+55 split v

# Enter fullscreen mode (f)
bindcode $mod+41 fullscreen

# Change container layout (s)(w)(e)
bindcode $mod+39 layout stacking
bindcode $mod+25 layout tabbed
bindcode $mod+26 layout toggle split

# Toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# Change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# Focus the parent container (a)
bindcode $mod+38 focus parent

# Focus the child container (a)
bindcode $mod+Shift+38 focus child

# Media keys
bindsym XF86AudioMute         exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && ~/bin/alert-sound.sh
bindsym XF86AudioRaiseVolume  exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% && ~/bin/alert-sound.sh
bindsym XF86AudioLowerVolume  exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% && ~/bin/alert-sound.sh
bindsym XF86MonBrightnessUp   exec --no-startup-id xbacklight -inc 5
bindsym XF86MonBrightnessDown exec --no-startup-id xbacklight -dec 5

# Reload the configuration file (c)
bindcode $mod+Shift+54 reload

# Restart i3 inplace (r)
bindcode $mod+Shift+27 restart

# Workspaces
focus_follows_mouse no

set $workspace1 workspace "1: Terminal"
set $workspace2 workspace "2: Chrome"
set $workspace3 workspace "3: Chrome @ Microsoft"
set $workspace4 workspace "4: Chat"
set $workspace5 workspace "5: IntelliJ"
set $workspace6 workspace "6"
set $workspace7 workspace "7"
set $workspace8 workspace "8: Emacs"
set $workspace9 workspace "9: RDP"
set $workspace0 workspace "10: TeamViewer"

# Bind workspaces to monitors
$workspace1 output eDP1
$workspace2 output eDP1
$workspace3 output eDP1
$workspace4 output eDP1
$workspace5 output eDP1
$workspace6 output DP1
$workspace7 output eDP1
$workspace8 output eDP1
$workspace9 output DP1
$workspace0 output eDP1

# Switch to workspace using keypad
bindcode $mod+87 $workspace1
bindcode $mod+88 $workspace2
bindcode $mod+89 $workspace3
bindcode $mod+83 $workspace4
bindcode $mod+84 $workspace5
bindcode $mod+85 $workspace6
bindcode $mod+79 $workspace7
bindcode $mod+80 $workspace8
bindcode $mod+81 $workspace9
bindcode $mod+90 $workspace0

# Switch to workspace using number row
bindsym $mod+1 $workspace1
bindsym $mod+2 $workspace2
bindsym $mod+3 $workspace3
bindsym $mod+4 $workspace4
bindsym $mod+5 $workspace5
bindsym $mod+6 $workspace6
bindsym $mod+7 $workspace7
bindsym $mod+8 $workspace8
bindsym $mod+9 $workspace9
bindsym $mod+0 $workspace0

# Move window to workspace using keypad
bindcode $mod+Shift+87 move container to $workspace1
bindcode $mod+Shift+88 move container to $workspace2
bindcode $mod+Shift+89 move container to $workspace3
bindcode $mod+Shift+83 move container to $workspace4
bindcode $mod+Shift+84 move container to $workspace5
bindcode $mod+Shift+85 move container to $workspace6
bindcode $mod+Shift+79 move container to $workspace7
bindcode $mod+Shift+80 move container to $workspace8
bindcode $mod+Shift+81 move container to $workspace9
bindcode $mod+Shift+90 move container to $workspace0

# Move window to workspace using number row
bindsym $mod+Shift+1 move container to $workspace1
bindsym $mod+Shift+2 move container to $workspace2
bindsym $mod+Shift+3 move container to $workspace3
bindsym $mod+Shift+4 move container to $workspace4
bindsym $mod+Shift+5 move container to $workspace5
bindsym $mod+Shift+6 move container to $workspace6
bindsym $mod+Shift+7 move container to $workspace7
bindsym $mod+Shift+8 move container to $workspace8
bindsym $mod+Shift+9 move container to $workspace9
bindsym $mod+Shift+0 move container to $workspace0


# Resize window (r)
mode "Resize" {
  # (h)
  bindcode 43            resize grow   left  10 px or 10 ppt
  bindcode Shift+43      resize shrink right 10 px or 10 ppt
  bindcode Ctrl+43       resize grow   left  1  px or 1  ppt
  bindcode Ctrl+Shift+43 resize shrink right 1  px or 1  ppt
  # (j)
  bindcode Shift+44      resize grow   down  10 px or 10 ppt
  bindcode 44            resize shrink up    10 px or 10 ppt
  bindcode Ctrl+Shift+44 resize grow   down  1  px or 1  ppt
  bindcode Ctrl+44       resize shrink up    1  px or 1  ppt
  # (k)
  bindcode Shift+45      resize shrink down  10 px or 10 ppt
  bindcode 45            resize grow   up    10 px or 10 ppt
  bindcode Ctrl+Shift+45 resize shrink down  1  px or 1  ppt
  bindcode Ctrl+45       resize grow   up    1  px or 1  ppt
  # (l)
  bindcode Shift+46      resize grow   right 10 px or 10 ppt
  bindcode 46            resize shrink left  10 px or 10 ppt
  bindcode Ctrl+Shift+46 resize grow   right 1  px or 1  ppt
  bindcode Ctrl+46       resize shrink left  1  px or 1  ppt

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindcode $mod+27 mode "resize"

# Shutdown, Suspend, Lock (e)
set $mode_system System (l) lock, (e) logout, (s) suspend, (r) reboot, (h) shutdown, (m) monitor reset
mode "$mode_system" {
  # (l)
  bindcode 46 exec --no-startup-id ~/bin/i3exit.sh lock, mode "default"
  # (e)
  bindcode 26 exec --no-startup-id ~/bin/i3exit.sh logout, mode "default"
  # (s)
  bindcode 39 exec --no-startup-id ~/bin/i3exit.sh suspend, mode "default"
  # (r)
  bindcode 27 exec --no-startup-id ~/bin/i3exit.sh reboot, mode "default"
  # (h)
  bindcode 43 exec --no-startup-id ~/bin/i3exit.sh shutdown, mode "default"
  # (m)
  bindcode 58 exec --no-startup-id xrandr --auto, mode "default"

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindcode $mod+Shift+26 mode "$mode_system"

# Move workspaces between monitors (m)
set $mode_workspaces_monitors Move workspace
mode "$mode_workspaces_monitors" {
  # (h)
  bindcode 43 exec --no-startup-id i3-msg move workspace to output left, mode "default"
  # (l)
  bindcode 46 exec --no-startup-id i3-msg move workspace to output right, mode "default"

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindcode $mod+Shift+58 mode $mode_workspaces_monitors

# Rotate external monitor (t)
set $mode_rotate_external_monitor Rotate DP1 monitor (use arrow keys)
mode "$mode_rotate_external_monitor" {
  # (Up)
  bindcode 111 exec --no-startup-id xrandr --output DP1 --rotate normal, mode "default"
  # (Down)
  bindcode 116 exec --no-startup-id xrandr --output DP1 --rotate inverted, mode "default"
  # (Left)
  bindcode 113 exec --no-startup-id xrandr --output DP1 --rotate left, mode "default"
  # (Right)
  bindcode 114 exec --no-startup-id xrandr --output DP1 --rotate right, mode "default"

  # back to normal: Enter or Escape
  bindsym Return mode "default"
  bindsym Escape mode "default"
}
bindcode $mod+Shift+28 mode $mode_rotate_external_monitor

